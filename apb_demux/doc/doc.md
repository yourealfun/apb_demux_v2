# Документация для проекта APB Demux

## 1. Введение 
- Шина APB — это часть семейства шин AMBA3 фирмы ARM. Она представляет собой универсальный интерфейс для подключения периферийных устройств.
- Ведущее устройство (Master) – устройство, которое инициирует передачу данных для чтения или записи по системной шине.
- Ведомое устройство (Slave) – устройство, которое не инициирует обмен данными и отвечает только на входящие запросы на передачу.
- Дешифратор(Decoder) - дешифрует адрес назначения передачи данных и выбирает соответствуеющее ведущее устройство для работы ведомого с ним. 
- Функциональная модель APB (Advanced Peripheral Bus) DEMUX (демультиплексора) представляет собой устройство, которое принимает данные из единственной шины APB3 и направляет их к соответствующим устройствам в зависимости от адреса.

## 2. Основные характеристики
-	Параметризируемое число master-портов
-   Возможность работы master APB портов на разных частотах.
-	Управление базовым адресом и размером адресуемого пространства каждого мастер порта независимо через параметры.
### Slave:
-	Параметризуемая ширина шины адреса (от минимально необходимой до произвольного размера);
-	размерность шины данных фиксированная – 32 бит;
-	поддержка RESP=SLVERR при обращении в недоступные регистры
### Master:
-	Параметризуемая ширина шины адреса на каждом порте;
-	Параметризуемая ширина шины данных, одинаковая для всех портов;
## 3. Состав и структура
![Alt text](apb_demux_v2.drawio(2).drawio.svg)
### Структура top-Модуля APB Demux
![Alt text](demux_module.drawio.svg)
## 4. Внешние интерфейсы
В этом проекте используются интерфейс AMBA APB3
## 5. Описание сигналов
### APB SLAVE:
| Название сигнала | Направление| Разрядность|Синхронность|Описание|
|------------|------------|------------|------------|------------|
|PSELx_S|Input|1|Синхронный|Сигнал, который показывает, что конкретный исполнитель выбран и требуется транзакция|
|PENABLE_S|Input|1|Синхронный|Разрешение возможности транзакции|
|PPROT_S|Input|3|Синхронный|Сигнал доступа(защиты)|
|PADDR_S|Input|ASIZE|Синхронный|Шина адреса транзакции|
|PWRITE_S|Input|1|Синхронный|Выбор записи или чтения|
|PWDATA_S|Input|DW|Синхронный|Шина данных для записи|
|PSTRB_S|Input|DW/8|Синхронный|Сигнал, который указывает какой байт PWDATA будет записываться|
|PREADY_S|Output|1|Синхронный|Готовность slave совершать новую транзакцию|
|PRDATA_S|Output|DR|Синхронный|Шина данных для чтения|
|PSLVERR|Output|1|Синхронный|Сигнал, указывающий на ошибку передачи данных|
### APB MASTER:
| Название сигнала | Направление| Разрядность|Синхронность|Описание|
|------------|------------|------------|------------|------------|
|PSELx_Mn|Output|1|Синхронный|Сигнал, который показывает, что конкретный исполнитель выбран и требуется транзакция|
|PENABLE_Mn|Output|1|Синхронный|Разрешение возможности транзакции|
|PPROT_Mn|Output|3|Синхронный|Сигнал доступа(защиты)|
|PADDR_Mn|Output|ASIZE|Синхронный|Шина адреса транзакции|
|PWRITE_Mn|Output|1|Синхронный|Выбор записи или чтения|
|PWDATA_Mn|Output|DW|Синхронный|Шина данных для записи|
|PSTRB_Mn|Output|DW/8|Синхронный|Сигнал, который указывает какой байт PWDATA будет записываться|
|PREADY_Mn|Input|1|Синхронный|Готовность master совершать новую транзакцию|
|PRDATA_Mn|Input|DR|Синхронный|Шина данных для чтения|
#
ASIZE - параметр ширины сигнала адреса;
DW - параметр ширины данных при записи;
DR - параметр ширины данных при чтении;
## 6. Синхронизация и сброс
|Название сигнала |Направление|Ширина|Синхронность|Описание|
|------------|------------|------------|------------|------------|
|PCLK|input|1|Синхронный|Системная тактовая частота интерфейса APB|
|PRESET|input|1|Асинхронный|Асинхронный сброс с активным низким уровнем интерфейса APB, выставляется асинхронно, снимается синхронно PCLK|
## 7. Функциональное описание
![Alt text](<Operating states.drawio.png>)
## 8. История версий
v.01